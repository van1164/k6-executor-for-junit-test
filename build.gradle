import com.vanniktech.maven.publish.SonatypeHost
import com.vanniktech.maven.publish.JavaLibrary   // ★ 추가
import com.vanniktech.maven.publish.JavadocJar    // ★ 추가

plugins {
    id 'java'
    id "com.vanniktech.maven.publish" version "0.28.0"
    id 'signing'
}

group = 'io.github.van1164'
version = '0.8.0'
sourceCompatibility = '15'
targetCompatibility = '15'

repositories {
    mavenCentral()
}
compileJava.options.encoding='UTF-8'
tasks.withType(JavaCompile){
    options.encoding = "UTF-8"
}

tasks.withType(Javadoc) {
    options {
        encoding 'UTF-8'
    }
}
signing {
    sign publishing.publications
}

mavenPublishing {
    signAllPublications()
//    configure(new JavaLibrary(new JavadocJar.Empty(), true))
    publishToMavenCentral(SonatypeHost.CENTRAL_PORTAL)
//    configure(new JavaLibrary(new JavadocJar.Javadoc(), true))
    configure(new JavaLibrary(new JavadocJar.Empty(), true))


    coordinates("io.github.van1164", "k6-executor", "0.9.0")

    pom {
        name = "k6-executor"
        description = "k6-executor for junit"
        inceptionYear = "2025"
        url = "https://github.com/van1164/k6-executor-for-junit-test"


        licenses {
            license {
                name = "The Apache License, Version 2.0"
                url = "https://www.apache.org/licenses/LICENSE-2.0.txt"
                distribution = "https://www.apache.org/licenses/LICENSE-2.0.txt"
            }
        }
        developers {
            developer {
                id = "van1164"
                name = "Sihwan Kim"
                url = "https://github.com/van1164"
            }
        }
        scm {
            url = "https://github.com/van1164/k6-executor-for-junit-test"
            connection = "scm:git:git://github.com/van1164/k6-executor-for-junit-test.git"
            developerConnection = "scm:git:ssh://git@github.com/van1164"
        }
    }
}



dependencies {
    testImplementation platform('org.junit:junit-bom:5.9.1')
    testImplementation 'org.junit.jupiter:junit-jupiter'
    implementation 'org.apache.commons:commons-compress:1.26.2'
    compileOnly 'org.projectlombok:lombok:1.18.32'
    implementation 'org.projectlombok:lombok:1.18.32'
    annotationProcessor 'org.projectlombok:lombok:1.18.32'
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.12.3'

}

test {
    useJUnitPlatform()
}

